<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokemon Sleep 宝可梦评分系统（测试版）</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f0f8ff;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
        }
        .calculator-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        label {
            display: block;
            margin: 10px 0 5px;
            color: #34495e;
        }
        input, select {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .subskill-section {
            margin: 15px 0;
            padding: 15px;
            border-radius: 8px;
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
        }
        .subskill-section-title {
            font-weight: bold;
            margin: 0 0 15px 0;
            color: #2c3e50;
            font-size: 1.1em;
            padding-bottom: 8px;
            border-bottom: 2px solid #e9ecef;
        }
        .subskill-group {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
            margin: 10px 0;
        }
        .subskill-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px;
            border-radius: 6px;
            background-color: white;
            border: 1px solid #e9ecef;
            transition: all 0.2s ease;
        }
        .subskill-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-color: #3498db;
        }
        .subskill-gold {
            background-color: #fff3cd;
            border: 1px solid #ffeeba;
        }
        .subskill-gold label {
            color: #856404;
            font-weight: 500;
        }
        .subskill-blue {
            background-color: #cce5ff;
            border: 1px solid #b8daff;
        }
        .subskill-blue label {
            color: #004085;
            font-weight: 500;
        }
        .subskill-white {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
        }
        .subskill-white label {
            color: #495057;
        }
        input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: #3498db;
        }
        input[type="checkbox"]:checked + label {
            text-decoration: line-through;
            opacity: 0.7;
        }
        .subskill-item label {
            margin: 0;
            font-size: 0.95em;
            cursor: pointer;
        }
        button {
            background-color: #3498db;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
        }
        button:hover {
            background-color: #2980b9;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            background-color: #e8f4f8;
            border-radius: 5px;
            display: none;
        }
        .rating-bar {
            width: 100%;
            height: 20px;
            background-color: #eee;
            border-radius: 10px;
            overflow: hidden;
            margin: 5px 0;
        }
        .rating-fill {
            height: 100%;
            background-color: #2ecc71;
            transition: width 0.3s ease;
        }
        .image-upload-section {
            margin: 20px 0;
            padding: 15px;
            border: 2px dashed #ddd;
            border-radius: 5px;
            text-align: center;
        }
        .image-preview {
            max-width: 300px;
            margin: 10px 0;
        }
        .loading {
            display: none;
            margin: 10px 0;
        }
        .recognition-result {
            margin: 10px 0;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 5px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Pokemon Sleep 宝可梦评分系统</h1>
        
        <div class="calculator-section">
            <h2>宝可梦基本信息</h2>
            <label for="pokemonTypeFilter">宝可梦属性筛选:</label>
            <select id="pokemonTypeFilter" onchange="filterPokemonByType()">
                <option value="">全部属性</option>
                <option value="草系">草系</option>
                <option value="火系">火系</option>
                <option value="水系">水系</option>
                <option value="格斗系">格斗系</option>
                <option value="电系">电系</option>
                <option value="超能力系">超能力系</option>
                <option value="一般系">一般系</option>
                <option value="幽灵系">幽灵系</option>
                <option value="岩石系">岩石系</option>
                <option value="钢系">钢系</option>
                <option value="恶系">恶系</option>
                <option value="毒系">毒系</option>
                <option value="地面系">地面系</option>
                <option value="虫系">虫系</option>
                <option value="冰系">冰系</option>
                <option value="飞行系">飞行系</option>
                <option value="龙系">龙系</option>
                <option value="妖精系">妖精系</option>
            </select>

            <label for="pokemonName">宝可梦名称:</label>
            <select id="pokemonName" onchange="updatePokemonType()">
                <option value="">请选择宝可梦</option>
                <optgroup label="草系">
                    <option value="1">妙蛙种子</option>
                    <option value="2">妙蛙草</option>
                    <option value="3">妙蛙花</option>
                    <option value="69">喇叭芽</option>
                    <option value="70">口呆花</option>
                    <option value="71">大食花</option>
                    <option value="152">菊草叶</option>
                    <option value="153">月桂叶</option>
                    <option value="154">大竺葵</option>
                    <option value="906">新叶喵</option>
                    <option value="907">蒂蕾喵</option>
                    <option value="470">叶伊布</option>
                </optgroup>
                <optgroup label="火系">
                    <option value="4">小火龙</option>
                    <option value="5">火恐龙</option>
                    <option value="6">喷火龙</option>
                    <option value="37">六尾</option>
                    <option value="38">九尾</option>
                    <option value="58">卡蒂狗</option>
                    <option value="59">风速狗</option>
                    <option value="136">火伊布</option>
                    <option value="155">火球鼠</option>
                    <option value="156">火岩鼠</option>
                    <option value="157">火暴兽</option>
                    <option value="244">炎帝</option>
                    <option value="909">呆火鳄</option>
                    <option value="910">炙烫鳄</option>
                </optgroup>
                <optgroup label="水系">
                    <option value="7">杰尼龟</option>
                    <option value="8">卡咪龟</option>                    <option value="9">水箭龟</option>
                    <option value="54">可达鸭</option>
                    <option value="55">哥达鸭</option>
                    <option value="79">呆呆兽</option>
                    <option value="80">呆壳兽</option>
                    <option value="199">呆呆王</option>
                    <option value="134">水伊布</option>
                    <option value="158">小锯鳄</option>
                    <option value="159">蓝鳄</option>
                    <option value="160">大力鳄</option>
                    <option value="194">乌波</option>
                    <option value="195">沼王</option>
                    <option value="245">水君</option>
                    <option value="912">润水鸭</option>
                    <option value="913">涌水鸭</option>
                </optgroup>
                <optgroup label="格斗系">
                    <option value="56">猴怪</option>
                    <option value="57">火暴猴</option>
                    <option value="447">利欧路</option>
                    <option value="448">路卡利欧</option>
                    <option value="475">艾路雷朵</option>
                    <option value="759">童偶熊</option>
                    <option value="760">穿着熊</option>
                    <option value="914">狂欢浪舞鸭</option>
                </optgroup>
                <optgroup label="电系">
                    <option value="25">皮卡丘</option>
                    <option value="26">雷丘</option>
                    <option value="135">雷伊布</option>
                    <option value="172">皮丘</option>
                    <option value="179">咩利羊</option>
                    <option value="180">茸茸羊</option>
                    <option value="181">电龙</option>
                    <option value="243">雷公</option>
                    <option value="702">咚咚鼠</option>
                    <option value="9001">皮卡丘（佳节）</option>
                    <option value="9002">皮卡丘（万圣节）</option>
                    <option value="921">布拨</option>
                    <option value="922">布土拨</option>
                    <option value="923">巴布土拨</option>
                    <option value="403">小猫怪</option>
                    <option value="404">勒克猫</option>
                    <option value="405">伦琴猫</option>
                </optgroup>
                <optgroup label="超能力系">
                    <option value="122">魔墙人偶</option>
                    <option value="196">太阳伊布</option>
                    <option value="280">拉鲁拉丝</option>
                    <option value="281">奇鲁莉安</option>
                    <option value="282">沙奈朵</option>
                    <option value="360">小果然</option>
                    <option value="202">果然翁</option>
                    <option value="517">魔尼尼</option>
                    <option value="518">食梦梦</option>
                    <option value="519">梦梦蚀</option>
                </optgroup>
                <optgroup label="一般系">
                    <option value="19">小拉达</option>
                    <option value="20">拉达</option>
                    <option value="52">喵喵</option>
                    <option value="53">猫老大</option>
                    <option value="115">袋兽</option>
                    <option value="132">百变怪</option>
                    <option value="133">伊布</option>
                    <option value="287">懒人獭</option>
                    <option value="288">过动猿</option>
                    <option value="289">请假王</option>
                    <option value="9004">伊布（佳节）</option>
                </optgroup>
                <optgroup label="幽灵系">
                    <option value="92">鬼斯</option>
                    <option value="93">鬼斯通</option>
                    <option value="94">耿鬼</option>
                    <option value="353">怨影娃娃</option>
                    <option value="354">诅咒娃娃</option>
                    <option value="425">飘飘球</option>
                    <option value="426">随风球</option>
                    <option value="778">谜拟Q</option>
                    <option value="911">骨纹巨声鳄</option>
                </optgroup>
                <optgroup label="岩石系">
                    <option value="74">小拳石</option>
                    <option value="75">隆隆石</option>
                    <option value="76">隆隆岩</option>
                    <option value="95">大岩蛇</option>
                    <option value="185">树才怪</option>
                    <option value="438">盆才怪</option>
                    <option value="246">幼基拉斯</option>
                    <option value="247">沙基拉斯</option>
                </optgroup>
                <optgroup label="钢系">
                    <option value="81">小磁怪</option>
                    <option value="82">三合一磁怪</option>
                    <option value="208">大钢蛇</option>
                    <option value="304">可可多拉</option>
                    <option value="305">可多拉</option>
                    <option value="306">波士可多拉</option>
                    <option value="462">自爆磁怪</option>
                </optgroup>
                <optgroup label="恶系">
                    <option value="215">狃拉</option>
                    <option value="228">戴鲁比</option>
                    <option value="229">黑鲁加</option>
                    <option value="302">勾魂眼</option>
                    <option value="359">阿勃梭鲁</option>
                    <option value="461">玛狃拉</option>
                    <option value="908">魔幻假面喵</option>
                    <option value="248">班基拉斯</option>
                    <option value="197">月亮伊布</option>
                </optgroup>
                <optgroup label="毒系">
                    <option value="23">阿柏蛇</option>
                    <option value="24">阿柏怪</option>
                    <option value="316">溶食兽</option>
                    <option value="317">吞食兽</option>
                    <option value="980">土王</option>
                    <option value="453">不良蛙</option>
                    <option value="454">毒骷蛙</option>
                    <option value="7054">乌波（帕底亚的样子）</option>
                </optgroup>
                <optgroup label="地面系">
                    <option value="50">地鼠</option>
                    <option value="51">三地鼠</option>
                    <option value="104">卡拉卡拉</option>
                    <option value="105">嘎啦嘎啦</option>
                </optgroup>
                <optgroup label="虫系">
                    <option value="10">绿毛虫</option>
                    <option value="11">铁甲蛹</option>
                    <option value="12">巴大蝶</option>
                    <option value="127">凯罗斯</option>
                    <option value="214">赫拉克罗斯</option>
                    <option value="736">强颚鸡母虫</option>
                    <option value="737">虫电宝</option>
                    <option value="738">锹农炮虫</option>
                </optgroup>
                <optgroup label="冰系">
                    <option value="363">海豹球</option>
                    <option value="364">海魔狮</option>
                    <option value="365">帝牙海狮</option>
                    <option value="459">雪笠怪</option>
                    <option value="460">暴雪王</option>
                    <option value="471">冰伊布</option>
                    <option value="7006">六尾（阿罗拉的样子）</option>
                    <option value="7007">九尾（阿罗拉的样子）</option>
                </optgroup>
                <optgroup label="飞行系">
                    <option value="84">嘟嘟</option>
                    <option value="85">嘟嘟利</option>
                    <option value="333">青绵鸟</option>
                    <option value="627">毛头小鹰</option>
                    <option value="628">勇士雄鹰</option>
                    <option value="225">信使鸟</option>
                    <option value="845">古月鸟</option>
                </optgroup>
                <optgroup label="龙系">
                    <option value="334">七夕青鸟</option>
                    <option value="147">迷你龙</option>
                    <option value="148">哈克龙</option>
                    <option value="149">快龙</option>
                </optgroup>
                <optgroup label="妖精系">
                    <option value="35">皮皮</option>
                    <option value="36">皮可西</option>
                    <option value="39">胖丁</option>
                    <option value="40">胖可丁</option>
                    <option value="173">皮宝宝</option>
                    <option value="174">宝宝丁</option>
                    <option value="175">波克比</option>
                    <option value="176">波克基古</option>
                    <option value="468">波克基斯</option>
                    <option value="700">仙子伊布</option>
                    <option value="764">花疗环环</option>
                </optgroup>
            </select>

            <label for="pokemonCategory">宝可梦类型:</label>
            <select id="pokemonCategory" disabled>
                <option value="ingredient">食材型</option>
                <option value="skill">技能型</option>
                <option value="berry">树果型</option>
            </select>

            <label for="isShiny">是否为闪光宝可梦:</label>
            <select id="isShiny">
                <option value="false">否</option>
                <option value="true">是</option>
            </select>

            <label for="ingredientType1">食材类型1:</label>
            <select id="ingredientType1">
                <option value="milk">哞哞鲜奶</option>
                <option value="honey">甜甜蜜</option>
                <option value="cacao">放松可可</option>
                <option value="apple">特选苹果</option>
                <option value="mushroom">品鲜蘑菇</option>
                <option value="herb">火辣香草</option>
                <option value="egg">特选蛋</option>
                <option value="potato">窝心洋芋</option>
                <option value="tomato">好眠番茄</option>
                <option value="wheat">粗枝大葱</option>
                <option value="corn">萌绿玉米</option>
                <option value="soybean">萌绿大豆</option>
                <option value="coffee">醒脑咖啡豆</option>
                <option value="tail">美味尾巴</option>
                <option value="ginger">暖暖姜</option>
                <option value="oil">纯粹油</option>
                <option value="tofu">豆制肉</option>
            </select>

            <label for="ingredientType2">食材类型2:</label>
            <select id="ingredientType2">
                <option value="milk">哞哞鲜奶</option>
                <option value="honey">甜甜蜜</option>
                <option value="cacao">放松可可</option>
                <option value="apple">特选苹果</option>
                <option value="mushroom">品鲜蘑菇</option>
                <option value="herb">火辣香草</option>
                <option value="egg">特选蛋</option>
                <option value="potato">窝心洋芋</option>
                <option value="tomato">好眠番茄</option>
                <option value="wheat">粗枝大葱</option>
                <option value="corn">萌绿玉米</option>
                <option value="soybean">萌绿大豆</option>
                <option value="coffee">醒脑咖啡豆</option>
                <option value="tail">美味尾巴</option>
                <option value="ginger">暖暖姜</option>
                <option value="oil">纯粹油</option>
                <option value="tofu">豆制肉</option>
            </select>

            <label for="ingredientType3">食材类型3:</label>
            <select id="ingredientType3">
                <option value="milk">哞哞鲜奶</option>
                <option value="honey">甜甜蜜</option>
                <option value="cacao">放松可可</option>
                <option value="apple">特选苹果</option>
                <option value="mushroom">品鲜蘑菇</option>
                <option value="herb">火辣香草</option>
                <option value="egg">特选蛋</option>
                <option value="potato">窝心洋芋</option>
                <option value="tomato">好眠番茄</option>
                <option value="wheat">粗枝大葱</option>
                <option value="corn">萌绿玉米</option>
                <option value="soybean">萌绿大豆</option>
                <option value="coffee">醒脑咖啡豆</option>
                <option value="tail">美味尾巴</option>
                <option value="ginger">暖暖姜</option>
                <option value="oil">纯粹油</option>
                <option value="tofu">豆制肉</option>
            </select>

            <label for="nature">宝可梦性格:</label>
            <select id="nature">
                <optgroup label="无加成性格">
                    <option value="timid">害羞（×，×）</option>
                    <option value="hardy">勤奋（×，×）</option>
                    <option value="docile">坦率（×，×）</option>
                    <option value="hasty">浮躁（×，×）</option>
                    <option value="serious">认真（×，×）</option>
                </optgroup>
                <optgroup label="活力回复量↑">
                    <option value="relaxed">悠闲（活力回复量↑，exp↓）</option>
                    <option value="bold">大胆（活力回复量↑，帮忙速度↓）</option>
                    <option value="jolly">乐天（活力回复量↑，主技能发动机率↓）</option>
                    <option value="naughty">淘气（活力回复量↑，食材发现率↓）</option>
                </optgroup>
                <optgroup label="exp↑">
                    <option value="rash">急躁（exp↑，活力回复量↓）</option>
                    <option value="timid">胆小（exp↑，帮忙速度↓）</option>
                    <option value="naive">天真（exp↑，主技能发动机率↓）</option>
                    <option value="jolly">爽朗（exp↑，食材发现率↓）</option>
                </optgroup>
                <optgroup label="帮忙速度↑">
                    <option value="lonely">怕寂寞（帮忙速度↑，活力回复量↓）</option>
                    <option value="brave">勇敢（帮忙速度↑，exp↓）</option>
                    <option value="naughty">顽皮（帮忙速度↑，主技能发动机率↓）</option>
                    <option value="adamant">固执（帮忙速度↑，食材发现率↓）</option>
                </optgroup>
                <optgroup label="主技能发动机率↑">
                    <option value="gentle">温顺（主技能发动机率↑，活力回复量↓）</option>
                    <option value="modest">自大（主技能发动机率↑，exp↓）</option>
                    <option value="calm">温和（主技能发动机率↑，帮忙速度↓）</option>
                    <option value="careful">慎重（主技能发动机率↑，食材发现率↓）</option>
                </optgroup>
                <optgroup label="食材发现率↑">
                    <option value="sassy">慢吞吞（食材发现率↑，活力回复量↓）</option>
                    <option value="quiet">冷静（食材发现率↑，exp↓）</option>
                    <option value="modest">内敛（食材发现率↑，帮忙速度↓）</option>
                    <option value="rash">马虎（食材发现率↑，主技能发动机率↓）</option>
                </optgroup>
            </select>

            <h3>副技能选择</h3>
            <p style="color: #666; font-style: italic;">请选择对应等级的副技能</p>
            
            <!-- 10级技能 -->
            <div class="subskill-section">
                <h3 class="subskill-section-title">10级技能</h3>
                <div class="subskill-group">
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="berryS_10" value="树果数量S">
                        <label for="berryS_10">树果数量S</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="sleepExpBonus_10" value="睡眠EXP奖励">
                        <label for="sleepExpBonus_10">睡眠EXP奖励</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="helperBonus_10" value="帮手奖励">
                        <label for="helperBonus_10">帮手奖励</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="researchExpBonus_10" value="研究EXP奖励">
                        <label for="researchExpBonus_10">研究EXP奖励</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="dreamShardBonus_10" value="梦之碎片奖励">
                        <label for="dreamShardBonus_10">梦之碎片奖励</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="energyRecoveryBonus_10" value="活力回复奖励">
                        <label for="energyRecoveryBonus_10">活力回复奖励</label>
                    </div>
                    <div class="subskill-item subskill-white">
                        <input type="checkbox" id="helpSpeedS_10" value="帮忙速度S">
                        <label for="helpSpeedS_10">帮忙速度S</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="helpSpeedM_10" value="帮忙速度M">
                        <label for="helpSpeedM_10">帮忙速度M</label>
                    </div>
                    <div class="subskill-item subskill-white">
                        <input type="checkbox" id="inventoryS_10" value="持有上限提升S">
                        <label for="inventoryS_10">持有上限提升S</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="inventoryM_10" value="持有上限提升M">
                        <label for="inventoryM_10">持有上限提升M</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="inventoryL_10" value="持有上限提升L">
                        <label for="inventoryL_10">持有上限提升L</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="skillLevelS_10" value="技能等级提升S">
                        <label for="skillLevelS_10">技能等级提升S</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="skillLevelM_10" value="技能等级提升M">
                        <label for="skillLevelM_10">技能等级提升M</label>
                    </div>
                    <div class="subskill-item subskill-white">
                        <input type="checkbox" id="ingredientS_10" value="食材机率提升S">
                        <label for="ingredientS_10">食材机率提升S</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="ingredientM_10" value="食材机率提升M">
                        <label for="ingredientM_10">食材机率提升M</label>
                    </div>
                    <div class="subskill-item subskill-white">
                        <input type="checkbox" id="skillTriggerS_10" value="技能机率提升S">
                        <label for="skillTriggerS_10">技能机率提升S</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="skillTriggerM_10" value="技能机率提升M">
                        <label for="skillTriggerM_10">技能机率提升M</label>
                    </div>
                </div>
            </div>

            <!-- 25级技能 -->
            <div class="subskill-section">
                <h3 class="subskill-section-title">25级技能</h3>
                <div class="subskill-group">
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="berryS_25" value="树果数量S">
                        <label for="berryS_25">树果数量S</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="sleepExpBonus_25" value="睡眠EXP奖励">
                        <label for="sleepExpBonus_25">睡眠EXP奖励</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="helperBonus_25" value="帮手奖励">
                        <label for="helperBonus_25">帮手奖励</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="researchExpBonus_25" value="研究EXP奖励">
                        <label for="researchExpBonus_25">研究EXP奖励</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="dreamShardBonus_25" value="梦之碎片奖励">
                        <label for="dreamShardBonus_25">梦之碎片奖励</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="energyRecoveryBonus_25" value="活力回复奖励">
                        <label for="energyRecoveryBonus_25">活力回复奖励</label>
                    </div>
                    <div class="subskill-item subskill-white">
                        <input type="checkbox" id="helpSpeedS_25" value="帮忙速度S">
                        <label for="helpSpeedS_25">帮忙速度S</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="helpSpeedM_25" value="帮忙速度M">
                        <label for="helpSpeedM_25">帮忙速度M</label>
                    </div>
                    <div class="subskill-item subskill-white">
                        <input type="checkbox" id="inventoryS_25" value="持有上限提升S">
                        <label for="inventoryS_25">持有上限提升S</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="inventoryM_25" value="持有上限提升M">
                        <label for="inventoryM_25">持有上限提升M</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="inventoryL_25" value="持有上限提升L">
                        <label for="inventoryL_25">持有上限提升L</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="skillLevelS_25" value="技能等级提升S">
                        <label for="skillLevelS_25">技能等级提升S</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="skillLevelM_25" value="技能等级提升M">
                        <label for="skillLevelM_25">技能等级提升M</label>
                    </div>
                    <div class="subskill-item subskill-white">
                        <input type="checkbox" id="ingredientS_25" value="食材机率提升S">
                        <label for="ingredientS_25">食材机率提升S</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="ingredientM_25" value="食材机率提升M">
                        <label for="ingredientM_25">食材机率提升M</label>
                    </div>
                    <div class="subskill-item subskill-white">
                        <input type="checkbox" id="skillTriggerS_25" value="技能机率提升S">
                        <label for="skillTriggerS_25">技能机率提升S</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="skillTriggerM_25" value="技能机率提升M">
                        <label for="skillTriggerM_25">技能机率提升M</label>
                    </div>
                </div>
            </div>

            <!-- 50级技能 -->
            <div class="subskill-section">
                <h3 class="subskill-section-title">50级技能</h3>
                <div class="subskill-group">
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="berryS_50" value="树果数量S">
                        <label for="berryS_50">树果数量S</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="sleepExpBonus_50" value="睡眠EXP奖励">
                        <label for="sleepExpBonus_50">睡眠EXP奖励</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="helperBonus_50" value="帮手奖励">
                        <label for="helperBonus_50">帮手奖励</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="researchExpBonus_50" value="研究EXP奖励">
                        <label for="researchExpBonus_50">研究EXP奖励</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="dreamShardBonus_50" value="梦之碎片奖励">
                        <label for="dreamShardBonus_50">梦之碎片奖励</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="energyRecoveryBonus_50" value="活力回复奖励">
                        <label for="energyRecoveryBonus_50">活力回复奖励</label>
                    </div>
                    <div class="subskill-item subskill-white">
                        <input type="checkbox" id="helpSpeedS_50" value="帮忙速度S">
                        <label for="helpSpeedS_50">帮忙速度S</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="helpSpeedM_50" value="帮忙速度M">
                        <label for="helpSpeedM_50">帮忙速度M</label>
                    </div>
                    <div class="subskill-item subskill-white">
                        <input type="checkbox" id="inventoryS_50" value="持有上限提升S">
                        <label for="inventoryS_50">持有上限提升S</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="inventoryM_50" value="持有上限提升M">
                        <label for="inventoryM_50">持有上限提升M</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="inventoryL_50" value="持有上限提升L">
                        <label for="inventoryL_50">持有上限提升L</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="skillLevelS_50" value="技能等级提升S">
                        <label for="skillLevelS_50">技能等级提升S</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="skillLevelM_50" value="技能等级提升M">
                        <label for="skillLevelM_50">技能等级提升M</label>
                    </div>
                    <div class="subskill-item subskill-white">
                        <input type="checkbox" id="ingredientS_50" value="食材机率提升S">
                        <label for="ingredientS_50">食材机率提升S</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="ingredientM_50" value="食材机率提升M">
                        <label for="ingredientM_50">食材机率提升M</label>
                    </div>
                    <div class="subskill-item subskill-white">
                        <input type="checkbox" id="skillTriggerS_50" value="技能机率提升S">
                        <label for="skillTriggerS_50">技能机率提升S</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="skillTriggerM_50" value="技能机率提升M">
                        <label for="skillTriggerM_50">技能机率提升M</label>
                    </div>
                </div>
            </div>

            <!-- 75级技能 -->
            <div class="subskill-section">
                <h3 class="subskill-section-title">75级技能</h3>
                <div class="subskill-group">
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="berryS_75" value="树果数量S">
                        <label for="berryS_75">树果数量S</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="sleepExpBonus_75" value="睡眠EXP奖励">
                        <label for="sleepExpBonus_75">睡眠EXP奖励</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="helperBonus_75" value="帮手奖励">
                        <label for="helperBonus_75">帮手奖励</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="researchExpBonus_75" value="研究EXP奖励">
                        <label for="researchExpBonus_75">研究EXP奖励</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="dreamShardBonus_75" value="梦之碎片奖励">
                        <label for="dreamShardBonus_75">梦之碎片奖励</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="energyRecoveryBonus_75" value="活力回复奖励">
                        <label for="energyRecoveryBonus_75">活力回复奖励</label>
                    </div>
                    <div class="subskill-item subskill-white">
                        <input type="checkbox" id="helpSpeedS_75" value="帮忙速度S">
                        <label for="helpSpeedS_75">帮忙速度S</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="helpSpeedM_75" value="帮忙速度M">
                        <label for="helpSpeedM_75">帮忙速度M</label>
                    </div>
                    <div class="subskill-item subskill-white">
                        <input type="checkbox" id="inventoryS_75" value="持有上限提升S">
                        <label for="inventoryS_75">持有上限提升S</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="inventoryM_75" value="持有上限提升M">
                        <label for="inventoryM_75">持有上限提升M</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="inventoryL_75" value="持有上限提升L">
                        <label for="inventoryL_75">持有上限提升L</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="skillLevelS_75" value="技能等级提升S">
                        <label for="skillLevelS_75">技能等级提升S</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="skillLevelM_75" value="技能等级提升M">
                        <label for="skillLevelM_75">技能等级提升M</label>
                    </div>
                    <div class="subskill-item subskill-white">
                        <input type="checkbox" id="ingredientS_75" value="食材机率提升S">
                        <label for="ingredientS_75">食材机率提升S</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="ingredientM_75" value="食材机率提升M">
                        <label for="ingredientM_75">食材机率提升M</label>
                    </div>
                    <div class="subskill-item subskill-white">
                        <input type="checkbox" id="skillTriggerS_75" value="技能机率提升S">
                        <label for="skillTriggerS_75">技能机率提升S</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="skillTriggerM_75" value="技能机率提升M">
                        <label for="skillTriggerM_75">技能机率提升M</label>
                    </div>
                </div>
            </div>

            <!-- 100级技能 -->
            <div class="subskill-section">
                <h3 class="subskill-section-title">100级技能</h3>
                <div class="subskill-group">
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="berryS_100" value="树果数量S">
                        <label for="berryS_100">树果数量S</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="sleepExpBonus_100" value="睡眠EXP奖励">
                        <label for="sleepExpBonus_100">睡眠EXP奖励</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="helperBonus_100" value="帮手奖励">
                        <label for="helperBonus_100">帮手奖励</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="researchExpBonus_100" value="研究EXP奖励">
                        <label for="researchExpBonus_100">研究EXP奖励</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="dreamShardBonus_100" value="梦之碎片奖励">
                        <label for="dreamShardBonus_100">梦之碎片奖励</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="energyRecoveryBonus_100" value="活力回复奖励">
                        <label for="energyRecoveryBonus_100">活力回复奖励</label>
                    </div>
                    <div class="subskill-item subskill-white">
                        <input type="checkbox" id="helpSpeedS_100" value="帮忙速度S">
                        <label for="helpSpeedS_100">帮忙速度S</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="helpSpeedM_100" value="帮忙速度M">
                        <label for="helpSpeedM_100">帮忙速度M</label>
                    </div>
                    <div class="subskill-item subskill-white">
                        <input type="checkbox" id="inventoryS_100" value="持有上限提升S">
                        <label for="inventoryS_100">持有上限提升S</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="inventoryM_100" value="持有上限提升M">
                        <label for="inventoryM_100">持有上限提升M</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="inventoryL_100" value="持有上限提升L">
                        <label for="inventoryL_100">持有上限提升L</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="skillLevelS_100" value="技能等级提升S">
                        <label for="skillLevelS_100">技能等级提升S</label>
                    </div>
                    <div class="subskill-item subskill-gold">
                        <input type="checkbox" id="skillLevelM_100" value="技能等级提升M">
                        <label for="skillLevelM_100">技能等级提升M</label>
                    </div>
                    <div class="subskill-item subskill-white">
                        <input type="checkbox" id="ingredientS_100" value="食材机率提升S">
                        <label for="ingredientS_100">食材机率提升S</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="ingredientM_100" value="食材机率提升M">
                        <label for="ingredientM_100">食材机率提升M</label>
                    </div>
                    <div class="subskill-item subskill-white">
                        <input type="checkbox" id="skillTriggerS_100" value="技能机率提升S">
                        <label for="skillTriggerS_100">技能机率提升S</label>
                    </div>
                    <div class="subskill-item subskill-blue">
                        <input type="checkbox" id="skillTriggerM_100" value="技能机率提升M">
                        <label for="skillTriggerM_100">技能机率提升M</label>
                    </div>
                </div>
            </div>

            <button onclick="calculatePokemonScore()">计算宝可梦评分</button>
            
            <div id="pokemonScoreResult" class="result"></div>
        </div>
    </div>

    <script>
        // 添加全局变量来跟踪已选择的技能
        let selectedSkills = {
            '10': null,
            '25': null,
            '50': null,
            '75': null,
            '100': null
        };

        // 添加事件监听器到所有复选框
        document.addEventListener('DOMContentLoaded', function() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function(e) {
                    const level = this.id.split('_')[1];
                    const skillName = this.id.split('_')[0];
                    
                    if (this.checked) {
                        // 检查是否已经在该等级选择了其他技能
                        if (selectedSkills[level] && selectedSkills[level] !== skillName) {
                            // 如果已经选择了其他技能，取消当前选择
                            this.checked = false;
                            alert('每个等级只能选择一个技能！');
                            return;
                        }
                        
                        // 检查其他等级是否已经选择了相同的技能
                        for (let otherLevel in selectedSkills) {
                            if (otherLevel !== level && selectedSkills[otherLevel] === skillName) {
                                this.checked = false;
                                alert('不同等级不能选择相同的技能！');
                                return;
                            }
                        }
                        
                        // 如果检查通过，更新选中的技能
                        selectedSkills[level] = skillName;
                    } else {
                        // 如果取消选中，清除该等级的技能记录
                        selectedSkills[level] = null;
                    }
                });
            });
        });

        function calculatePokemonScore() {
            const pokemonName = document.getElementById('pokemonName').value;
            const pokemonCategory = document.getElementById('pokemonCategory').value;
            const ingredientType1 = document.getElementById('ingredientType1').value;
            const ingredientType2 = document.getElementById('ingredientType2').value;
            const ingredientType3 = document.getElementById('ingredientType3').value;
            const nature = document.getElementById('nature').value;

            // 获取选中的副技能
            const selectedSubskills = [];
            const subskillCheckboxes = document.querySelectorAll('input[type="checkbox"]:checked');
            subskillCheckboxes.forEach(checkbox => {
                // 从ID中提取技能名称和等级
                const [skillName, level] = checkbox.id.split('_');
                selectedSubskills.push({name: skillName, level: parseInt(level)});
            });

            // 基础分数计算
            let baseScore = 0; // 基础分0

            // 闪光加成
            const isShiny = document.getElementById('isShiny').value === 'true';
            if (isShiny) {
                baseScore += 0.5; // 闪光宝可梦额外加0.5分
            }

            // 副技能评分
            let subskillScore = 0;
            const hasIngredientChanceM = selectedSubskills.some(skill => skill.name === 'ingredientChanceM');

            // 根据宝可梦类型设置不同的副技能评分
            if (pokemonCategory === 'ingredient') {
                // 食材型宝可梦的副技能评分
                const hasIngredientM = selectedSubskills.some(skill => skill.name === 'ingredientM');
                selectedSubskills.forEach(skill => {
                    switch(skill.name) {
                        case 'ingredientM':
                            subskillScore += 1.6;
                            break;
                        case 'ingredientS':
                            subskillScore += 0.7;
                            break;
                        case 'helpSpeedM':
                            subskillScore += 0.9;
                            break;
                        case 'helpSpeedS':
                            subskillScore += 0.4;
                            break;
                        case 'berryS':
                            subskillScore += 0.2;
                            break;
                        case 'sleepExpBonus':
                            subskillScore += 0.3;
                            break;
                        case 'helperBonus':
                            subskillScore += hasIngredientM ? 1.3 : 0.3;
                            break;
                        case 'inventoryS':
                            subskillScore += hasIngredientM ? 0.2 : 0.1;
                            break;
                        case 'inventoryM':
                            subskillScore += hasIngredientM ? 0.4 : 0.2;
                            break;
                        case 'inventoryL':
                            subskillScore += hasIngredientM ? 0.6 : 0.3;
                            break;
                        case 'skillLevelM':
                            subskillScore += 0.4;
                            break;
                        case 'skillLevelS':
                            subskillScore += 0.2;
                            break;
                    }
                });
            } else if (pokemonCategory === 'skill') {
                // 技能型宝可梦的副技能评分
                const hasSkillChanceM = selectedSubskills.some(skill => skill.name === 'skillTriggerM');
                const hasBerryS = selectedSubskills.some(skill => skill.name === 'berryS');
                // 特殊宝可梦列表（不额外加分）
                const specialPokemon = ['845', '453', '454', '980', '7054', '1', '2', '3', '909', '910', '911'];
                const isSpecialPokemon = specialPokemon.includes(pokemonName);

                selectedSubskills.forEach(skill => {
                    switch(skill.name) {
                        case 'skillTriggerM':
                            subskillScore += 1.6;
                            break;
                        case 'skillTriggerS':
                            subskillScore += 0.7;
                            break;
                        case 'helpSpeedM':
                            subskillScore += 0.9;
                            break;
                        case 'helpSpeedS':
                            subskillScore += 0.4;
                            break;
                        case 'inventoryL':
                            subskillScore += 0.1;
                            break;
                        case 'inventoryM':
                            subskillScore += 0.1;
                            break;
                        case 'inventoryS':
                            subskillScore += 0.1;
                            break;
                        case 'skillLevelM':
                            subskillScore += 0.4;
                            break;
                        case 'skillLevelS':
                            subskillScore += 0.2;
                            break;
                        case 'sleepExpBonus':
                            subskillScore += 0.3;
                            break;
                        case 'helperBonus':
                            subskillScore += hasSkillChanceM ? 1.3 : 0.3;
                            break;
                        case 'berryS':
                            subskillScore += isSpecialPokemon ? 0.56 : 0.2;
                            break;
                    }
                });
            } else {
                // 树果型宝可梦的副技能评分
                const hasBerryS = selectedSubskills.some(skill => skill.name === 'berryS');
                selectedSubskills.forEach(skill => {
                    switch(skill.name) {
                        case 'berryS':
                            subskillScore += 1.8;
                            break;
                        case 'helpSpeedM':
                            subskillScore += 1.2;
                            break;
                        case 'helpSpeedS':
                            subskillScore += 0.6;
                            break;
                        case 'sleepExp':
                            subskillScore += 0.3;
                            break;
                        case 'helperBonus':
                            subskillScore += hasBerryS ? 1.3 : 0.5;
                            break;
                    }
                });

                // 如果没有树果数量S，减去2.5分
                if (!hasBerryS) {
                    subskillScore -= 2.5;
                }
            }

            baseScore += subskillScore;

            // 性格加成
            const natureMultipliers = {
                // 无加成性格
                'timid': 1.0,    // 害羞
                'hardy': 1.0,    // 勤奋
                'docile': 1.0,   // 坦率
                'hasty': 1.0,    // 浮躁
                'serious': 1.0,  // 认真
                // 活力回复量加成
                'relaxed': 1.0,  // 悠闲
                'bold': 1.0,     // 大胆
                'jolly': 1.0,    // 乐天
                'naughty': 1.0,  // 淘气
                // exp获得量加成
                'rash': 1.0,     // 急躁
                'timid': 1.0,    // 胆小
                'naive': 1.0,    // 天真
                'jolly': 1.0,    // 爽朗
                // 帮忙速度加成
                'lonely': 1.0,   // 怕寂寞
                'brave': 1.0,    // 勇敢
                'naughty': 1.0,  // 顽皮
                'adamant': 1.0,  // 固执
                // 主技能发动机率加成
                'gentle': 1.0,   // 温顺
                'modest': 1.0,   // 自大
                'calm': 1.0,     // 温和
                'careful': 1.0,  // 慎重
                // 食材发现率加成
                'sassy': 1.0,    // 慢吞吞
                'quiet': 1.0,    // 冷静
                'modest': 0.5,   // 内敛
                'rash': 1.0      // 马虎
            };

            // 根据宝可梦类型添加性格加分
            if (pokemonCategory === 'ingredient') {
                // 食材型宝可梦的性格加分
                if (['sassy', 'quiet', 'rash'].includes(nature)) {
                    baseScore += 1.0;
                } else if (nature === 'modest') {
                    baseScore += 0.5;
                } else if (['jolly', 'naughty', 'rash', 'careful'].includes(nature)) {
                    baseScore -= 1.0;
                } else if (['bold', 'timid', 'calm'].includes(nature)) {
                    baseScore -= 0.6;
                } else if (nature === 'modest') {
                    baseScore -= 0.4;
                }
            } else if (pokemonCategory === 'skill') {
                // 技能型宝可梦的性格加分
                if (['gentle', 'modest', 'calm', 'careful'].includes(nature)) {
                    if (nature === 'calm') {
                        baseScore += 0.5;
                    } else {
                        baseScore += 1.0;
                    }
                } else if (['lonely', 'brave', 'naughty', 'adamant'].includes(nature)) {
                    baseScore += 0.6;
                } else if (['rash', 'naive', 'jolly'].includes(nature)) {
                    baseScore -= 1.0;
                } else if (['bold', 'timid', 'modest'].includes(nature)) {
                    baseScore -= 0.6;
                } else if (nature === 'naughty') {
                    baseScore -= 0.4;
                }
            } else {
                // 树果型宝可梦的性格加分
                if (nature === 'adamant') {
                    baseScore += 1.2;
                } else if (['lonely', 'brave', 'naughty'].includes(nature)) {
                    baseScore += 0.9;
                } else if (['rash', 'naive', 'jolly'].includes(nature)) {
                    baseScore += 0.3;
                } else if (['modest', 'calm', 'bold'].includes(nature)) {
                    baseScore -= 0.9;
                }
                // 其他性格（包括害羞）不加分也不扣分
            }

            // 计算总分
            const totalScore = baseScore; // 移除Math.round，保留小数点
            const maxScore = 100; // 调整最大分数为100

            // 计算前三个技能的分数
            let firstThreeSkillsScore = 0;
            if (isShiny) {
                firstThreeSkillsScore += 0.5;
            }
            
            // 只计算前三个技能的得分
            const firstThreeSkills = selectedSubskills.filter(skill => skill.level <= 50);
            
            // 根据宝可梦类型设置不同的副技能评分
            if (pokemonCategory === 'ingredient') {
                const hasIngredientM = firstThreeSkills.some(skill => skill.name === 'ingredientM');
                firstThreeSkills.forEach(skill => {
                    switch(skill.name) {
                        case 'ingredientM':
                            firstThreeSkillsScore += 1.6;
                            break;
                        case 'ingredientS':
                            firstThreeSkillsScore += 0.7;
                            break;
                        case 'helpSpeedM':
                            firstThreeSkillsScore += 0.9;
                            break;
                        case 'helpSpeedS':
                            firstThreeSkillsScore += 0.4;
                            break;
                        case 'berryS':
                            firstThreeSkillsScore += 0.2;
                            break;
                        case 'sleepExpBonus':
                            firstThreeSkillsScore += 0.3;
                            break;
                        case 'helperBonus':
                            firstThreeSkillsScore += hasIngredientM ? 1.3 : 0.3;
                            break;
                        case 'inventoryS':
                            firstThreeSkillsScore += hasIngredientM ? 0.2 : 0.1;
                            break;
                        case 'inventoryM':
                            firstThreeSkillsScore += hasIngredientM ? 0.4 : 0.2;
                            break;
                        case 'inventoryL':
                            firstThreeSkillsScore += hasIngredientM ? 0.6 : 0.3;
                            break;
                        case 'skillLevelM':
                            firstThreeSkillsScore += 0.4;
                            break;
                        case 'skillLevelS':
                            firstThreeSkillsScore += 0.2;
                            break;
                    }
                });
            } else if (pokemonCategory === 'skill') {
                const hasSkillChanceM = firstThreeSkills.some(skill => skill.name === 'skillTriggerM');
                const hasBerryS = firstThreeSkills.some(skill => skill.name === 'berryS');
                const specialPokemon = ['845', '453', '454', '980', '7054', '1', '2', '3', '909', '910', '911'];
                const isSpecialPokemon = specialPokemon.includes(pokemonName);

                firstThreeSkills.forEach(skill => {
                    switch(skill.name) {
                        case 'skillTriggerM':
                            firstThreeSkillsScore += 1.6;
                            break;
                        case 'skillTriggerS':
                            firstThreeSkillsScore += 0.7;
                            break;
                        case 'helpSpeedM':
                            firstThreeSkillsScore += 0.9;
                            break;
                        case 'helpSpeedS':
                            firstThreeSkillsScore += 0.4;
                            break;
                        case 'inventoryL':
                            firstThreeSkillsScore += 0.1;
                            break;
                        case 'inventoryM':
                            firstThreeSkillsScore += 0.1;
                            break;
                        case 'inventoryS':
                            firstThreeSkillsScore += 0.1;
                            break;
                        case 'skillLevelM':
                            firstThreeSkillsScore += 0.4;
                            break;
                        case 'skillLevelS':
                            firstThreeSkillsScore += 0.2;
                            break;
                        case 'sleepExpBonus':
                            firstThreeSkillsScore += 0.3;
                            break;
                        case 'helperBonus':
                            firstThreeSkillsScore += hasSkillChanceM ? 1.3 : 0.3;
                            break;
                        case 'berryS':
                            firstThreeSkillsScore += isSpecialPokemon ? 0.56 : 0.2;
                            break;
                    }
                });
            } else {
                const hasBerryS = firstThreeSkills.some(skill => skill.name === 'berryS');
                firstThreeSkills.forEach(skill => {
                    switch(skill.name) {
                        case 'berryS':
                            firstThreeSkillsScore += 1.8;
                            break;
                        case 'helpSpeedM':
                            firstThreeSkillsScore += 1.2;
                            break;
                        case 'helpSpeedS':
                            firstThreeSkillsScore += 0.6;
                            break;
                        case 'sleepExp':
                            firstThreeSkillsScore += 0.3;
                            break;
                        case 'helperBonus':
                            firstThreeSkillsScore += hasBerryS ? 1.3 : 0.5;
                            break;
                    }
                });

                if (!hasBerryS) {
                    firstThreeSkillsScore -= 2.5;
                }
            }

            // 添加性格加成到前三个技能的分数
            if (pokemonCategory === 'ingredient') {
                if (['sassy', 'quiet', 'rash'].includes(nature)) {
                    firstThreeSkillsScore += 1.0;
                } else if (nature === 'modest') {
                    firstThreeSkillsScore += 0.5;
                } else if (['jolly', 'naughty', 'rash', 'careful'].includes(nature)) {
                    firstThreeSkillsScore -= 1.0;
                } else if (['bold', 'timid', 'calm'].includes(nature)) {
                    firstThreeSkillsScore -= 0.6;
                } else if (nature === 'modest') {
                    firstThreeSkillsScore -= 0.4;
                }
            } else if (pokemonCategory === 'skill') {
                if (['gentle', 'modest', 'calm', 'careful'].includes(nature)) {
                    if (nature === 'calm') {
                        firstThreeSkillsScore += 0.5;
                    } else {
                        firstThreeSkillsScore += 1.0;
                    }
                } else if (['lonely', 'brave', 'adamant'].includes(nature)) {
                    firstThreeSkillsScore += 0.6;
                } else if (['rash', 'naive', 'jolly'].includes(nature)) {
                    firstThreeSkillsScore -= 1.0;
                } else if (['bold', 'timid', 'modest'].includes(nature)) {
                    firstThreeSkillsScore -= 0.6;
                } else if (nature === 'naughty') {
                    firstThreeSkillsScore -= 0.4;
                }
            } else {
                if (nature === 'adamant') {
                    firstThreeSkillsScore += 1.2;
                } else if (['lonely', 'brave', 'naughty'].includes(nature)) {
                    firstThreeSkillsScore += 0.9;
                } else if (['rash', 'naive', 'jolly'].includes(nature)) {
                    firstThreeSkillsScore += 0.3;
                } else if (['modest', 'calm', 'bold'].includes(nature)) {
                    firstThreeSkillsScore -= 0.9;
                }
            }

            // 计算百分比
            const scorePercentage = Math.min((totalScore / maxScore) * 100, 100);
            const firstThreeSkillsPercentage = Math.min((firstThreeSkillsScore / maxScore) * 100, 100);

            // 评价等级
            let evaluation = '';
            if (totalScore >= 5.5) {
                evaluation = '您就是pvp的宝可梦真神！';
            } else if (totalScore >= 4.5) {
                evaluation = '极品！快拿去秀吧';
            } else if (totalScore >= 3.5) {
                evaluation = '很优秀了';
            } else if (totalScore >= 2.5) {
                evaluation = '恭喜，你的宝合格了';
            } else if (totalScore >= 1.5) {
                evaluation = '可以用了';
            } else {
                evaluation = '还是送给博士吧';
            }

            const resultDiv = document.getElementById('pokemonScoreResult');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
                <h3>宝可梦评分结果：</h3>
                <p>宝可梦：${document.getElementById('pokemonName').options[document.getElementById('pokemonName').selectedIndex].text}</p>
                <p>类型：${document.getElementById('pokemonCategory').options[document.getElementById('pokemonCategory').selectedIndex].text}</p>
                <p>是否闪光：${isShiny ? '是' : '否'}</p>
                <p>食材类型：${document.getElementById('ingredientType1').options[document.getElementById('ingredientType1').selectedIndex].text}、${document.getElementById('ingredientType2').options[document.getElementById('ingredientType2').selectedIndex].text}、${document.getElementById('ingredientType3').options[document.getElementById('ingredientType3').selectedIndex].text}</p>
                <p>性格：${document.getElementById('nature').options[document.getElementById('nature').selectedIndex].text}</p>
                <p>副技能：${selectedSubskills.length > 0 ? selectedSubskills.map(skill => {
                    const skillNames = {
                        'berryS': '树果数量S',
                        'helperBonus': '帮手奖励',
                        'sleepExpBonus': '睡眠EXP奖励',
                        'researchExpBonus': '研究EXP奖励',
                        'dreamShardBonus': '梦之碎片奖励',
                        'energyRecoveryBonus': '活力回复奖励',
                        'helpSpeedM': '帮忙速度M',
                        'helpSpeedS': '帮忙速度S',
                        'inventoryL': '持有上限提升L',
                        'inventoryM': '持有上限提升M',
                        'inventoryS': '持有上限提升S',
                        'skillLevelM': '技能等级提升M',
                        'skillLevelS': '技能等级提升S',
                        'ingredientM': '食材机率提升M',
                        'ingredientS': '食材机率提升S',
                        'skillTriggerM': '技能机率提升M',
                        'skillTriggerS': '技能机率提升S'
                    };
                    return skillNames[skill.name] || skill.name;
                }).join('、') : '无'}</p>
                <h4>前三个技能评分：${firstThreeSkillsScore.toFixed(2)}分</h4>
                <h4>全部技能评分：${totalScore.toFixed(2)}分</h4>
                <p>评价：${evaluation}</p>
                <p>详细分析：</p>
                <ul>
                    <li><strong>前三个技能分数明细：</strong></li>
                    ${isShiny ? '<li>闪光加成：0.50分</li>' : ''}
                    <li>副技能得分：${(() => {
                        let score = 0;
                        const skills = selectedSubskills.filter(skill => skill.level <= 50);
                        if (pokemonCategory === 'ingredient') {
                            const hasIngredientM = skills.some(skill => skill.name === 'ingredientM');
                            skills.forEach(skill => {
                                switch(skill.name) {
                                    case 'ingredientM': score += 1.6; break;
                                    case 'ingredientS': score += 0.7; break;
                                    case 'helpSpeedM': score += 0.9; break;
                                    case 'helpSpeedS': score += 0.4; break;
                                    case 'berryS': score += 0.2; break;
                                    case 'sleepExpBonus': score += 0.3; break;
                                    case 'helperBonus': score += hasIngredientM ? 1.3 : 0.3; break;
                                    case 'inventoryS': score += hasIngredientM ? 0.2 : 0.1; break;
                                    case 'inventoryM': score += hasIngredientM ? 0.4 : 0.2; break;
                                    case 'inventoryL': score += hasIngredientM ? 0.6 : 0.3; break;
                                    case 'skillLevelM': score += 0.4; break;
                                    case 'skillLevelS': score += 0.2; break;
                                }
                            });
                        } else if (pokemonCategory === 'skill') {
                            const hasSkillChanceM = skills.some(skill => skill.name === 'skillTriggerM');
                            const hasBerryS = skills.some(skill => skill.name === 'berryS');
                            const specialPokemon = ['845', '453', '454', '980', '7054', '1', '2', '3', '909', '910', '911'];
                            const isSpecialPokemon = specialPokemon.includes(pokemonName);
                            skills.forEach(skill => {
                                switch(skill.name) {
                                    case 'skillTriggerM': score += 1.6; break;
                                    case 'skillTriggerS': score += 0.7; break;
                                    case 'helpSpeedM': score += 0.9; break;
                                    case 'helpSpeedS': score += 0.4; break;
                                    case 'inventoryL': score += 0.1; break;
                                    case 'inventoryM': score += 0.1; break;
                                    case 'inventoryS': score += 0.1; break;
                                    case 'skillLevelM': score += 0.4; break;
                                    case 'skillLevelS': score += 0.2; break;
                                    case 'sleepExpBonus': score += 0.3; break;
                                    case 'helperBonus': score += hasSkillChanceM ? 1.3 : 0.3; break;
                                    case 'berryS': score += isSpecialPokemon ? 0.56 : 0.2; break;
                                }
                            });
                        } else {
                            const hasBerryS = skills.some(skill => skill.name === 'berryS');
                            skills.forEach(skill => {
                                switch(skill.name) {
                                    case 'berryS': score += 1.8; break;
                                    case 'helpSpeedM': score += 1.2; break;
                                    case 'helpSpeedS': score += 0.6; break;
                                    case 'sleepExp': score += 0.3; break;
                                    case 'helperBonus': score += hasBerryS ? 1.3 : 0.5; break;
                                }
                            });
                            if (!hasBerryS) {
                                score -= 2.5;
                            }
                        }
                        return score.toFixed(2);
                    })()}分</li>
                    ${pokemonCategory === 'ingredient' ? 
                        `<li>食材组合得分：${(() => {
                            const specialPokemon = ['845', '453', '454', '980', '7054', '1', '2', '3', '909', '910', '911'];
                            const isSpecialPokemon = specialPokemon.includes(document.getElementById('pokemonName').value);
                            const ingredient1 = document.getElementById('ingredientType1').value;
                            const ingredient2 = document.getElementById('ingredientType2').value;
                            const ingredient3 = document.getElementById('ingredientType3').value;
                            
                            if (ingredient1 === ingredient2 && ingredient2 !== ingredient3) {
                                return isSpecialPokemon ? '0.00分' : '0.40分';
                            } else if (ingredient1 === ingredient3 && ingredient2 !== ingredient3) {
                                return (['4', '5', '6', '147', '148', '149', '69', '70', '71'].includes(document.getElementById('pokemonName').value)) ? '-0.40分' : '0.00分';
                            } else if (ingredient1 !== ingredient2 && ingredient2 !== ingredient3 && ingredient1 !== ingredient3) {
                                return '-0.80分';
                            }
                            return '0.00分';
                        })()}</li>` : 
                        ''}
                    <li>性格加成：${(() => {
                        if (pokemonCategory === 'ingredient') {
                            if (['sassy', 'quiet', 'rash'].includes(nature)) return '1.00分';
                            if (nature === 'modest') return '0.50分';
                            if (['jolly', 'naughty', 'rash', 'careful'].includes(nature)) return '-1.00分';
                            if (['bold', 'timid', 'calm'].includes(nature)) return '-0.60分';
                            if (nature === 'modest') return '-0.40分';
                        } else if (pokemonCategory === 'skill') {
                            if (nature === 'calm') return '0.50分';
                            if (['gentle', 'modest', 'careful'].includes(nature)) return '1.00分';
                            if (['lonely', 'brave', 'adamant'].includes(nature)) return '0.60分';
                            if (['rash', 'naive', 'jolly'].includes(nature)) return '-1.00分';
                            if (['bold', 'timid', 'modest'].includes(nature)) return '-0.60分';
                            if (nature === 'naughty') return '-0.40分';
                        } else {
                            if (nature === 'adamant') return '1.20分';
                            if (['lonely', 'brave', 'naughty'].includes(nature)) return '0.90分';
                            if (['rash', 'naive', 'jolly'].includes(nature)) return '0.30分';
                            if (['modest', 'calm', 'bold'].includes(nature)) return '-0.90分';
                        }
                        return '0.00分';
                    })()}</li>
                </ul>
                <ul>
                    <li><strong>全部技能分数明细：</strong></li>
                    ${isShiny ? '<li>闪光加成：0.50分</li>' : ''}
                    <li>副技能得分：${subskillScore.toFixed(2)}分</li>
                    ${pokemonCategory === 'ingredient' ? 
                        `<li>食材组合得分：${(() => {
                            const specialPokemon = ['845', '453', '454', '980', '7054', '1', '2', '3', '909', '910', '911'];
                            const isSpecialPokemon = specialPokemon.includes(document.getElementById('pokemonName').value);
                            const ingredient1 = document.getElementById('ingredientType1').value;
                            const ingredient2 = document.getElementById('ingredientType2').value;
                            const ingredient3 = document.getElementById('ingredientType3').value;
                            
                            if (ingredient1 === ingredient2 && ingredient2 !== ingredient3) {
                                return isSpecialPokemon ? '0.00分' : '0.40分';
                            } else if (ingredient1 === ingredient3 && ingredient2 !== ingredient3) {
                                return (['4', '5', '6', '147', '148', '149', '69', '70', '71'].includes(document.getElementById('pokemonName').value)) ? '-0.40分' : '0.00分';
                            } else if (ingredient1 !== ingredient2 && ingredient2 !== ingredient3 && ingredient1 !== ingredient3) {
                                return '-0.80分';
                            }
                            return '0.00分';
                        })()}</li>` : 
                        ''}
                    <li>性格加成：${(() => {
                        if (pokemonCategory === 'ingredient') {
                            if (['sassy', 'quiet', 'rash'].includes(nature)) return '1.00分';
                            if (nature === 'modest') return '0.50分';
                            if (['jolly', 'naughty', 'rash', 'careful'].includes(nature)) return '-1.00分';
                            if (['bold', 'timid', 'calm'].includes(nature)) return '-0.60分';
                            if (nature === 'modest') return '-0.40分';
                        } else if (pokemonCategory === 'skill') {
                            if (nature === 'calm') return '0.50分';
                            if (['gentle', 'modest', 'careful'].includes(nature)) return '1.00分';
                            if (['lonely', 'brave', 'adamant'].includes(nature)) return '0.60分';
                            if (['rash', 'naive', 'jolly'].includes(nature)) return '-1.00分';
                            if (['bold', 'timid', 'modest'].includes(nature)) return '-0.60分';
                            if (nature === 'naughty') return '-0.40分';
                        } else {
                            if (nature === 'adamant') return '1.20分';
                            if (['lonely', 'brave', 'naughty'].includes(nature)) return '0.90分';
                            if (['rash', 'naive', 'jolly'].includes(nature)) return '0.30分';
                            if (['modest', 'calm', 'bold'].includes(nature)) return '-0.90分';
                        }
                        return '0.00分';
                    })()}</li>
                </ul>
                <p style="color: #666; font-style: italic; margin-top: 15px;">测试中，结果仅供参考哦亲~~</p>
            `;
        }

        function updatePokemonType() {
            const pokemonSelect = document.getElementById('pokemonName');
            const selectedOption = pokemonSelect.options[pokemonSelect.selectedIndex];
            if (selectedOption.value) {
                const pokemonId = selectedOption.value;
                const pokemonCategory = document.getElementById('pokemonCategory');
                
                // 宝可梦类型映射
                const pokemonTypes = {
                    '1': 'ingredient', '2': 'ingredient', '3': 'ingredient',
                    '4': 'ingredient', '5': 'ingredient', '6': 'ingredient',
                    '7': 'ingredient', '8': 'ingredient', '9': 'ingredient',
                    '10': 'berry', '11': 'berry', '12': 'berry',
                    '19': 'berry', '20': 'berry', '23': 'berry',
                    '24': 'berry', '25': 'berry', '26': 'berry',
                    '35': 'berry', '36': 'berry', '37': 'berry',
                    '38': 'berry', '39': 'skill', '40': 'skill',
                    '50': 'ingredient', '51': 'ingredient', '52': 'skill',
                    '53': 'skill', '54': 'skill', '55': 'skill',
                    '56': 'berry', '57': 'berry', '58': 'skill',
                    '59': 'skill', '69': 'ingredient', '70': 'ingredient',
                    '71': 'ingredient', '74': 'ingredient', '75': 'ingredient',
                    '76': 'ingredient', '79': 'skill', '80': 'skill',
                    '81': 'skill', '82': 'skill', '84': 'berry',
                    '85': 'berry', '92': 'ingredient', '93': 'ingredient',
                    '94': 'ingredient', '95': 'berry', '104': 'berry',
                    '105': 'berry', '115': 'ingredient', '122': 'ingredient',
                    '127': 'ingredient', '132': 'ingredient', '133': 'skill',
                    '134': 'skill', '135': 'skill', '136': 'skill',
                    '147': 'ingredient', '148': 'ingredient', '149': 'ingredient',
                    '152': 'berry', '153': 'berry', '154': 'berry',
                    '155': 'berry', '156': 'berry', '157': 'berry',
                    '158': 'berry', '159': 'berry', '160': 'berry',
                    '172': 'berry', '173': 'berry', '174': 'skill',
                    '175': 'skill', '176': 'skill', '179': 'skill',
                    '180': 'skill', '181': 'skill', '185': 'skill',
                    '194': 'ingredient', '195': 'ingredient', '196': 'skill',
                    '197': 'skill', '199': 'skill', '202': 'skill',
                    '208': 'berry', '214': 'skill', '215': 'berry',
                    '225': 'ingredient', '228': 'berry', '229': 'berry',
                    '243': 'skill', '244': 'skill', '245': 'skill',
                    '246': 'ingredient', '247': 'ingredient', '248': 'ingredient',
                    '280': 'skill', '281': 'skill', '282': 'skill',
                    '287': 'berry', '288': 'berry', '289': 'berry',
                    '302': 'skill', '304': 'ingredient', '305': 'ingredient',
                    '306': 'ingredient', '316': 'skill', '317': 'skill',
                    '333': 'berry', '334': 'berry', '353': 'berry',
                    '354': 'berry', '359': 'ingredient', '360': 'skill',
                    '363': 'berry', '364': 'berry', '365': 'berry',
                    '403': 'ingredient', '404': 'ingredient', '405': 'ingredient',
                    '425': 'skill', '426': 'skill', '438': 'skill',
                    '439': 'ingredient', '447': 'skill', '448': 'skill',
                    '453': 'ingredient', '454': 'ingredient', '459': 'ingredient',
                    '460': 'ingredient', '461': 'berry', '462': 'skill',
                    '468': 'skill', '470': 'skill', '471': 'skill',
                    '475': 'skill', '517': 'berry', '518': 'berry',
                    '627': 'skill', '628': 'skill', '700': 'skill',
                    '702': 'skill', '736': 'ingredient', '737': 'ingredient',
                    '738': 'ingredient', '759': 'ingredient', '760': 'ingredient',
                    '764': 'ingredient', '778': 'skill', '845': 'ingredient',
                    '906': 'ingredient', '907': 'ingredient', '908': 'ingredient',
                    '909': 'ingredient', '910': 'ingredient', '911': 'ingredient',
                    '912': 'ingredient', '913': 'ingredient', '914': 'ingredient',
                    '921': 'skill', '922': 'skill', '923': 'skill',
                    '980': 'ingredient', '7006': 'berry', '7007': 'berry',
                    '7054': 'ingredient', '9001': 'skill', '9002': 'berry',
                    '9004': 'berry'
                };

                // 设置宝可梦类型
                pokemonCategory.value = pokemonTypes[pokemonId] || 'ingredient';
                
                // 更新食材类型
                updateIngredientTypes();
            }
        }

        function updateIngredientTypes() {
            const pokemonSelect = document.getElementById('pokemonName');
            const selectedOption = pokemonSelect.options[pokemonSelect.selectedIndex];
            if (selectedOption.value) {
                const pokemonId = selectedOption.value;
                const ingredients = getPokemonIngredients(pokemonId);
                
                // 更新第一个食材类型（固定为第一个选项）
                const ingredientType1Select = document.getElementById('ingredientType1');
                ingredientType1Select.innerHTML = '';
                const option1 = document.createElement('option');
                option1.value = getIngredientValue(ingredients[0]);
                option1.text = ingredients[0];
                ingredientType1Select.appendChild(option1);
                
                // 更新第二个食材类型（可以选择前两个选项）
                const ingredientType2Select = document.getElementById('ingredientType2');
                ingredientType2Select.innerHTML = '';
                for (let i = 0; i < Math.min(2, ingredients.length); i++) {
                    const option = document.createElement('option');
                    option.value = getIngredientValue(ingredients[i]);
                    option.text = ingredients[i];
                    ingredientType2Select.appendChild(option);
                }
                
                // 更新第三个食材类型（可以选择前三个选项）
                const ingredientType3Select = document.getElementById('ingredientType3');
                ingredientType3Select.innerHTML = '';
                for (let i = 0; i < Math.min(3, ingredients.length); i++) {
                    const option = document.createElement('option');
                    option.value = getIngredientValue(ingredients[i]);
                    option.text = ingredients[i];
                    ingredientType3Select.appendChild(option);
                }

                // 自动选择第一个选项
                ingredientType1Select.value = getIngredientValue(ingredients[0]);
                ingredientType2Select.value = getIngredientValue(ingredients[0]);
                ingredientType3Select.value = getIngredientValue(ingredients[0]);
            }
        }

        function getPokemonIngredients(pokemonId) {
            const pokemonIngredients = {
                '1': ['甜甜蜜', '好眠番茄', '窝心洋芋'],
                '2': ['甜甜蜜', '好眠番茄', '窝心洋芋'],
                '3': ['甜甜蜜', '好眠番茄', '窝心洋芋'],
                '4': ['豆制肉', '暖暖姜', '火辣香草'],
                '5': ['豆制肉', '暖暖姜', '火辣香草'],
                '6': ['豆制肉', '暖暖姜', '火辣香草'],
                '7': ['哞哞鲜奶', '放松可可', '豆制肉'],
                '8': ['哞哞鲜奶', '放松可可', '豆制肉'],
                '9': ['哞哞鲜奶', '放松可可', '豆制肉'],
                '10': ['甜甜蜜', '好眠番茄', '萌绿大豆'],
                '11': ['甜甜蜜', '好眠番茄', '萌绿大豆'],
                '12': ['甜甜蜜', '好眠番茄', '萌绿大豆'],
                '19': ['特选苹果', '萌绿大豆', '豆制肉'],
                '20': ['特选苹果', '萌绿大豆', '豆制肉'],
                '23': ['豆制肉', '特选蛋', '火辣香草'],
                '24': ['豆制肉', '特选蛋', '火辣香草'],
                '25': ['特选苹果', '暖暖姜', '特选蛋'],
                '26': ['特选苹果', '暖暖姜', '特选蛋'],
                '35': ['特选苹果', '甜甜蜜', '萌绿大豆'],
                '36': ['特选苹果', '甜甜蜜', '萌绿大豆'],
                '37': ['萌绿大豆', '萌绿玉米', '窝心洋芋'],
                '38': ['萌绿大豆', '萌绿玉米', '窝心洋芋'],
                '39': ['甜甜蜜', '纯粹油', '放松可可'],
                '40': ['甜甜蜜', '纯粹油', '放松可可'],
                '50': ['好眠番茄', '粗枝大葱', '萌绿大豆'],
                '51': ['好眠番茄', '粗枝大葱', '萌绿大豆'],
                '52': ['哞哞鲜奶', '豆制肉'],
                '53': ['哞哞鲜奶', '豆制肉'],
                '54': ['放松可可', '特选苹果', '豆制肉'],
                '55': ['放松可可', '特选苹果', '豆制肉'],
                '56': ['豆制肉', '品鲜蘑菇', '甜甜蜜'],
                '57': ['豆制肉', '品鲜蘑菇', '甜甜蜜'],
                '58': ['火辣香草', '豆制肉', '哞哞鲜奶'],
                '59': ['火辣香草', '豆制肉', '哞哞鲜奶'],
                '69': ['好眠番茄', '窝心洋芋', '粗枝大葱'],
                '70': ['好眠番茄', '窝心洋芋', '粗枝大葱'],
                '71': ['好眠番茄', '窝心洋芋', '粗枝大葱'],
                '74': ['萌绿大豆', '窝心洋芋', '品鲜蘑菇'],
                '75': ['萌绿大豆', '窝心洋芋', '品鲜蘑菇'],
                '76': ['萌绿大豆', '窝心洋芋', '品鲜蘑菇'],
                '79': ['放松可可', '美味尾巴', '好眠番茄'],
                '80': ['放松可可', '美味尾巴', '好眠番茄'],
                '81': ['纯粹油', '火辣香草'],
                '82': ['纯粹油', '火辣香草'],
                '84': ['萌绿大豆', '放松可可', '豆制肉'],
                '85': ['萌绿大豆', '放松可可', '豆制肉'],
                '92': ['火辣香草', '品鲜蘑菇', '纯粹油'],
                '93': ['火辣香草', '品鲜蘑菇', '纯粹油'],
                '94': ['火辣香草', '品鲜蘑菇', '纯粹油'],
                '95': ['好眠番茄', '豆制肉', '窝心洋芋'],
                '104': ['暖暖姜', '放松可可'],
                '105': ['暖暖姜', '放松可可'],
                '115': ['暖暖姜', '窝心洋芋', '萌绿大豆'],
                '122': ['好眠番茄', '窝心洋芋', '粗枝大葱'],
                '127': ['甜甜蜜', '特选苹果', '豆制肉'],
                '132': ['纯粹油', '粗枝大葱', '美味尾巴'],
                '133': ['哞哞鲜奶', '放松可可', '豆制肉'],
                '134': ['哞哞鲜奶', '放松可可', '豆制肉'],
                '135': ['哞哞鲜奶', '放松可可', '豆制肉'],
                '136': ['哞哞鲜奶', '放松可可', '豆制肉'],
                '147': ['火辣香草', '萌绿玉米', '纯粹油'],
                '148': ['火辣香草', '萌绿玉米', '纯粹油'],
                '149': ['火辣香草', '萌绿玉米', '纯粹油'],
                '152': ['放松可可', '甜甜蜜', '粗枝大葱'],
                '153': ['放松可可', '甜甜蜜', '粗枝大葱'],
                '154': ['放松可可', '甜甜蜜', '粗枝大葱'],
                '155': ['暖暖姜', '火辣香草', '纯粹油'],
                '156': ['暖暖姜', '火辣香草', '纯粹油'],
                '157': ['暖暖姜', '火辣香草', '纯粹油'],
                '158': ['豆制肉', '纯粹油'],
                '159': ['豆制肉', '纯粹油'],
                '160': ['豆制肉', '纯粹油'],
                '172': ['特选苹果', '暖暖姜', '特选蛋'],
                '173': ['特选苹果', '甜甜蜜', '萌绿大豆'],
                '174': ['甜甜蜜', '纯粹油', '放松可可'],
                '175': ['特选蛋', '暖暖姜', '放松可可'],
                '176': ['特选蛋', '暖暖姜', '放松可可'],
                '179': ['火辣香草', '特选蛋'],
                '180': ['火辣香草', '特选蛋'],
                '181': ['火辣香草', '特选蛋'],
                '185': ['好眠番茄', '萌绿大豆', '品鲜蘑菇'],
                '194': ['品鲜蘑菇', '窝心洋芋', '豆制肉'],
                '195': ['品鲜蘑菇', '窝心洋芋', '豆制肉'],
                '196': ['哞哞鲜奶', '放松可可', '豆制肉'],
                '197': ['哞哞鲜奶', '放松可可', '豆制肉'],
                '199': ['放松可可', '美味尾巴', '好眠番茄'],
                '202': ['特选苹果', '品鲜蘑菇', '纯粹油'],
                '208': ['好眠番茄', '豆制肉', '窝心洋芋'],
                '214': ['甜甜蜜', '品鲜蘑菇', '豆制肉'],
                '215': ['豆制肉', '特选蛋', '萌绿大豆'],
                '225': ['特选蛋', '特选苹果', '放松可可'],
                '228': ['火辣香草', '暖暖姜', '粗枝大葱'],
                '229': ['火辣香草', '暖暖姜', '粗枝大葱'],
                '243': ['豆制肉', '火辣香草', '粗枝大葱'],
                '244': ['纯粹油', '好眠番茄', '品鲜蘑菇'],
                '245': ['特选苹果', '纯粹油', '萌绿玉米'],
                '246': ['暖暖姜', '萌绿大豆', '豆制肉'],
                '247': ['暖暖姜', '萌绿大豆', '豆制肉'],
                '248': ['暖暖姜', '萌绿大豆', '豆制肉'],
                '280': ['特选苹果', '萌绿玉米', '粗枝大葱'],
                '281': ['特选苹果', '萌绿玉米', '粗枝大葱'],
                '282': ['特选苹果', '萌绿玉米', '粗枝大葱'],
                '287': ['好眠番茄', '甜甜蜜', '特选苹果'],
                '288': ['好眠番茄', '甜甜蜜', '特选苹果'],
                '289': ['好眠番茄', '甜甜蜜', '特选苹果'],
                '302': ['纯粹油', '品鲜蘑菇', '放松可可'],
                '304': ['豆制肉', '醒脑咖啡豆', '萌绿大豆'],
                '305': ['豆制肉', '醒脑咖啡豆', '萌绿大豆'],
                '306': ['豆制肉', '醒脑咖啡豆', '萌绿大豆'],
                '316': ['萌绿大豆', '品鲜蘑菇', '甜甜蜜'],
                '317': ['萌绿大豆', '品鲜蘑菇', '甜甜蜜'],
                '333': ['特选蛋', '萌绿大豆', '特选苹果'],
                '334': ['特选蛋', '萌绿大豆', '特选苹果'],
                '353': ['纯粹油', '暖暖姜', '品鲜蘑菇'],
                '354': ['纯粹油', '暖暖姜', '品鲜蘑菇'],
                '359': ['放松可可', '特选苹果', '品鲜蘑菇'],
                '360': ['特选苹果', '品鲜蘑菇', '纯粹油'],
                '363': ['纯粹油', '豆制肉', '暖暖姜'],
                '364': ['纯粹油', '豆制肉', '暖暖姜'],
                '365': ['纯粹油', '豆制肉', '暖暖姜'],
                '403': ['好眠番茄', '纯粹油', '醒脑咖啡豆'],
                '404': ['好眠番茄', '纯粹油', '醒脑咖啡豆'],
                '405': ['好眠番茄', '纯粹油', '醒脑咖啡豆'],
                '425': ['萌绿玉米', '纯粹油', '窝心洋芋'],
                '426': ['萌绿玉米', '纯粹油', '窝心洋芋'],
                '438': ['好眠番茄', '萌绿大豆', '品鲜蘑菇'],
                '439': ['好眠番茄', '窝心洋芋', '粗枝大葱'],
                '447': ['纯粹油', '窝心洋芋', '特选蛋'],
                '448': ['纯粹油', '窝心洋芋', '特选蛋'],
                '453': ['纯粹油', '豆制肉'],
                '454': ['纯粹油', '豆制肉'],
                '459': ['好眠番茄', '特选蛋', '品鲜蘑菇'],
                '460': ['好眠番茄', '特选蛋', '品鲜蘑菇'],
                '461': ['豆制肉', '特选蛋', '萌绿大豆'],
                '462': ['纯粹油', '火辣香草'],
                '468': ['特选蛋', '暖暖姜', '放松可可'],
                '470': ['哞哞鲜奶', '放松可可', '豆制肉'],
                '471': ['哞哞鲜奶', '放松可可', '豆制肉'],
                '475': ['特选苹果', '萌绿玉米', '粗枝大葱'],
                '517': ['哞哞鲜奶', '甜甜蜜', '醒脑咖啡豆'],
                '518': ['哞哞鲜奶', '甜甜蜜', '醒脑咖啡豆'],
                '627': ['豆制肉', '萌绿玉米', '醒脑咖啡豆'],
                '628': ['豆制肉', '萌绿玉米', '醒脑咖啡豆'],
                '700': ['哞哞鲜奶', '放松可可', '豆制肉'],
                '702': ['特选苹果', '放松可可', '萌绿玉米'],
                '736': ['醒脑咖啡豆', '品鲜蘑菇', '甜甜蜜'],
                '737': ['醒脑咖啡豆', '品鲜蘑菇', '甜甜蜜'],
                '738': ['醒脑咖啡豆', '品鲜蘑菇', '甜甜蜜'],
                '759': ['萌绿玉米', '豆制肉', '特选蛋'],
                '760': ['萌绿玉米', '豆制肉', '特选蛋'],
                '764': ['萌绿玉米', '暖暖姜', '放松可可'],
                '778': ['特选苹果', '醒脑咖啡豆', '品鲜蘑菇'],
                '845': ['纯粹油', '窝心洋芋', '特选蛋'],
                '906': ['窝心洋芋', '哞哞鲜奶', '暖暖姜'],
                '907': ['窝心洋芋', '哞哞鲜奶', '暖暖姜'],
                '908': ['窝心洋芋', '哞哞鲜奶', '暖暖姜'],
                '909': ['特选苹果', '豆制肉', '火辣香草'],
                '910': ['特选苹果', '豆制肉', '火辣香草'],
                '911': ['特选苹果', '豆制肉', '火辣香草'],
                '912': ['萌绿大豆', '粗枝大葱', '纯粹油'],
                '913': ['萌绿大豆', '粗枝大葱', '纯粹油'],
                '914': ['萌绿大豆', '粗枝大葱', '纯粹油'],
                '921': ['放松可可', '哞哞鲜奶', '特选蛋'],
                '922': ['放松可可', '哞哞鲜奶', '特选蛋'],
                '923': ['放松可可', '哞哞鲜奶', '特选蛋'],
                '980': ['放松可可', '醒脑咖啡豆', '窝心洋芋'],
                '7006': ['萌绿大豆', '萌绿玉米', '窝心洋芋'],
                '7007': ['萌绿大豆', '萌绿玉米', '窝心洋芋'],
                '7054': ['放松可可', '醒脑咖啡豆', '窝心洋芋'],
                '9001': ['特选苹果', '暖暖姜', '特选蛋'],
                '9002': ['特选苹果', '暖暖姜', '特选蛋'],
                '9004': ['哞哞鲜奶', '放松可可', '豆制肉']
            };
            return pokemonIngredients[pokemonId] || ['哞哞鲜奶', '甜甜蜜', '放松可可'];
        }

        function getIngredientValue(ingredient) {
            const ingredientMap = {
                '哞哞鲜奶': 'milk',
                '甜甜蜜': 'honey',
                '放松可可': 'cacao',
                '特选苹果': 'apple',
                '品鲜蘑菇': 'mushroom',
                '火辣香草': 'herb',
                '特选蛋': 'egg',
                '窝心洋芋': 'potato',
                '好眠番茄': 'tomato',
                '粗枝大葱': 'wheat',
                '萌绿玉米': 'corn',
                '萌绿大豆': 'soybean',
                '醒脑咖啡豆': 'coffee',
                '美味尾巴': 'tail',
                '暖暖姜': 'ginger',
                '纯粹油': 'oil',
                '豆制肉': 'tofu'
            };
            return ingredientMap[ingredient] || 'milk';
        }

        function filterPokemonByType() {
            const typeFilter = document.getElementById('pokemonTypeFilter').value;
            const pokemonSelect = document.getElementById('pokemonName');
            const optgroups = pokemonSelect.getElementsByTagName('optgroup');
            
            // 如果没有选择类型，显示所有选项
            if (!typeFilter) {
                Array.from(optgroups).forEach(optgroup => {
                    optgroup.style.display = '';
                    Array.from(optgroup.getElementsByTagName('option')).forEach(option => {
                        option.style.display = '';
                    });
                });
                return;
            }
            
            // 隐藏所有选项组
            Array.from(optgroups).forEach(optgroup => {
                if (optgroup.label === typeFilter) {
                    optgroup.style.display = '';
                    Array.from(optgroup.getElementsByTagName('option')).forEach(option => {
                        option.style.display = '';
                    });
                } else {
                    optgroup.style.display = 'none';
                    Array.from(optgroup.getElementsByTagName('option')).forEach(option => {
                        option.style.display = 'none';
                    });
                }
            });

            // 重置宝可梦选择
            pokemonSelect.value = '';
            
            // 触发 change 事件以更新其他相关字段
            const event = new Event('change', {
                bubbles: true,
                cancelable: true,
            });
            pokemonSelect.dispatchEvent(event);
        }

        // 页面加载完成后初始化事件监听
        document.addEventListener('DOMContentLoaded', function() {
            // 为类型筛选添加事件监听
            const typeFilter = document.getElementById('pokemonTypeFilter');
            typeFilter.addEventListener('change', filterPokemonByType);
            
            // 为宝可梦选择添加事件监听
            const pokemonSelect = document.getElementById('pokemonName');
            pokemonSelect.addEventListener('change', function() {
                updatePokemonType();
            });
            
            // 初始化复选框事件监听
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function(e) {
                    const level = this.id.split('_')[1];
                    const skillName = this.id.split('_')[0];
                    
                    if (this.checked) {
                        // 检查是否已经在该等级选择了其他技能
                        if (selectedSkills[level] && selectedSkills[level] !== skillName) {
                            // 如果已经选择了其他技能，取消当前选择
                            this.checked = false;
                            alert('每个等级只能选择一个技能！');
                            return;
                        }
                        
                        // 检查其他等级是否已经选择了相同的技能
                        for (let otherLevel in selectedSkills) {
                            if (otherLevel !== level && selectedSkills[otherLevel] === skillName) {
                                this.checked = false;
                                alert('不同等级不能选择相同的技能！');
                                return;
                            }
                        }
                        
                        // 如果检查通过，更新选中的技能
                        selectedSkills[level] = skillName;
                    } else {
                        // 如果取消选中，清除该等级的技能记录
                        selectedSkills[level] = null;
                    }
                });
            });
        });
    </script>
</body>
</html> 
